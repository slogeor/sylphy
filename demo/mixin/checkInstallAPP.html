<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf8">
    <title>浏览器与APP混合</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
  </head>
  <body>
  </body>
<style>
  a {
    font-size: 50px;
  }
</style>

<script>
  var UA = navigator.userAgent;
  var isAndroid = /.*Android.*/.test(UA),
    isIPhone = /.*iPhone.*/.test(UA),
    isQQMicroMes = /.*MicroMessenger.*/.test(UA);

  function checkApp() {
    if (document.hidden) {
      // already in native app
      // if (isAndroid)
      //   document.body.innerHTML = '<a href="qunaraphone://home?module=main">打开APP</a>';

      // else if (isIPhone) {
      //   document.body.innerHTML = '<a href="qunariphone://home?module=main">打开APP</a>';
      // } else {
      //   document.body.innerHTML = '非Android && 非IPhone';
      // }
      return;
    } else {
      window.stop();
     
      if (isAndroid)
        document.body.innerHTML = '<a href="http://m.qunar.com/download/Qunar_android_v6.apk">下载App</a>';
      else if (isIPhone) {
        document.body.innerHTML = '<a href="http://touch.qunar.com/downloadUrlJump.jsp?type=iphone&from=phone3w">下载App</a>';
      } else {
        document.body.innerHTML = '非Android && 非IPhone';
      }
      return;
    }
  }


  window.onload = function() {
    if (isQQMicroMes) { //micro message
      alert("please open in browser!!!");
      return;
    }

    if (isAndroid)
      window.location.href = "qunaraphone://home?module=main";
    else if (isIPhone) {
      window.location.href = "qunariphone://home?module=main";
    }

    setTimeout(function() {
      checkApp();
    }, 100)
   
  }

  window.onbeforeunload = function() {}
  window.onclose = function() {}
</script>
</html>